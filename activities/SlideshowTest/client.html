<!DOCTYPE html>
<html>
  <head>
    <title>Slideshow Controller | Hey You, Interact With Me!</title>

    <link rel="icon" href="logo/heyyou-fav.ico" sizes="any" />
    <!--<link rel="manifest" href="/manifest.webmanifest">-->

    <link rel="stylesheet" media="screen"                               href="client_min.css" /> <!-- think of CSS as client/controller-core.css -->
    <link rel="stylesheet" media="screen and (min-device-width: 800px)" href="client.css"     /> <!-- on a desktop => CSS to emulate phone size, shape, and appearance -->

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymoous">
    </script>

    <script src="socketCreation.js"></script>
    <script>      
      // Generic socket setup
      setupConnection("client");  

      // Page specific functions ..
      var audio = new Audio('/Slide16.mp3');

      function socketLoaded(){
	  console.log("Socket finished loading");

          socket.on('download', (url) => {
              console.log(url);
              download(url);
          });   
	  
          socket.on('audio', (state) => {
              playAudio(state);
          }); 
      }

      function send(e){
        socket.emit(e);
      }

      function playAudio(state){
        if (state =='play')
          audio.play();
        else {
          audio.load();
        }
      }

      function download(imageSrc) {
        const link = document.createElement('a');
        link.href = imageSrc;
        link.download = '';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }
    </script>
  </head>
  <body>

    <div class="smartphone">
      <div id="mobile_page">
        <div id="client_header" class="header" style="width: 100%;">

          <button onclick="selectActivity('/')" type="button"><img class="home-img" src="back.svg"></button>
          <h1 class="text">Hey There, Interact With Me!</h1>
          <img class="uni_img" src="uni_logo.svg">
	</div>

	<div class="heading">
	  <h1 class="heading">Control details:</h1>
	  <ul>
	    <li>Use the <i>Next</i> and <i>Previous</i> buttons move you through the slides</li>
	    <li>Use the <i>Download</i> button to download the displayed slide onto your phone</li>
	    <li>Press the <div style="display: inline-block; transform: scale(0.5);"><img class="home-img" src="back.svg" style="padding: 0"></div> button to exit the slideshow, and return to the App Chooser</li>
	  </ul>
	</div>

	<!-- 
	     Black Curved Upwards and Leftwards Arrow: U+2BAA 
	     Unicode version: 7.0 (2014)
	  -->
	
	<div class="controller-item" style="border: none;>
	  <div class="fb-container-equispaced">
	    <a class="fb-item" onclick="send('back')"><div>⮪ Previous</div></a>
	    <a class="fb-item" onclick="send('download')"><div>Download ⤓</div></a>
	    <a class="fb-item" onclick="send('next')"><div>Next ➥</div></a>
	  </div>
	</div>

	<!--
	<div id="client_body" class="body">
          <div class="activitySelectionGrid">
            <a class="grid-item" onclick="send('next')">
              <p class="item_name">Next</p>
            </a>
            <a class="grid-item" onclick="send('back')">
              <p class="item_name">Back</p>
            </a>
            <a class="grid-item" onclick="send('download')">
            <p class="item_name">Download</p>
            </a>
          </div>
	</div>
	-->
	
	
      </div>
    </div>

  </body>
</html>
