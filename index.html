<!DOCTYPE html>
<html lang="en">
    <head>
        <title>App Launcher | Hey You Interactive Display</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" type="text/css" href="https://csshake.surge.sh/csshake.min.css">
	
        <link rel="icon" href="https://www.waikato.ac.nz/favicon-32x32.png?v=QE50XMk2oY" sizes="any"><!-- 32×32 -->
        <link rel="icon" href="https://www.waikato.ac.nz/favicon-32x32.png?v=QE50XMk2oY" type="image/svg+xml">
        <link rel="apple-touch-icon" href="https://www.waikato.ac.nz/favicon-32x32.png?v=QE50XMk2oY"><!-- 180×180 -->
        <!--<link rel="manifest" href="/manifest.webmanifest">-->

        <!-- Cast Debug Logger -->
        <!--<script src="//www.gstatic.com/cast/sdk/libs/devtools/debug_layer/caf_receiver_logger.js"></script>-->

        <link rel="stylesheet" href="index.css">
	
        <script src="socketCreation.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>
        <script>
          // Generic socket setup
          function socketLoaded(anyListener) {
              var nric = self.location.host;
              console.log("nric: " + nric);
              console.log("Room ID: " + getCookie('roomID'));
	      
              var url = 'https://api.qrserver.com/v1/create-qr-code/?data=' + nric + '/join/' + getCookie('roomID') + '&size=250x250';
	      var $img = $('<img>').attr('src',url);
              $('#barcode').html($img);
	      
              console.log("URL: " + url);
              $('#website').text("Or visit on your phone: " + nric + '/join/' + getCookie('roomName'));
          }
	  	  
		  setupConnection("display"); 	      
	  

          // page specific functions
/*
	  var bgImageArray = [
	      "uow-background--ko-te-tangata-red.png",
	      "uow-background--ko-te-tangata-yellow.png",
	      "uow-background--for-the-people-yellow.png",
	      "uow-background--for-the-people-red.png"
	  ];

	  var bgImageBaseUrl = "/"; // For images from another domain, set this val in the form "//other.domain/my-backgrounds/"
	  var bgImageCrossFadeSecs = 12;
	  var bgImageCrossFadeMSecs = 1000 * bgImageCrossFadeSecs;

	  // Create a JS Image object for each, as this will cause the browser to
	  // to cache the images, thus avoiding white flash between background replacements
	  // Images need to be store in a persistent variable, otherwise they can be garbage collected
	  
	  var bgImagePreloadCache = [];
	  
	  for (i=0; i<bgImageArray.length; i++) {
	      var img = new Image();
	      img.src = bgImageBaseUrl + bgImageArray[i];
	      bgImagePreloadCache.push(img);
	  }

	  function backgroundSequenceXX() {
	      window.clearTimeout();
	      var k = 0;
	      for (i=0; i<bgImageArray.length; i++) {
		  console.log("setup backgrounSequece i = " + i);
		  setTimeout(function() {
		      console.log("timeout: k = " + k);
			  
		      $(document.body).css('background', "url(" + bgImageBaseUrl + bgImageArray[k] + ") no-repeat center center fixed");
		      $(document.body).css('background-size', "cover");
		      
		      if ((k + 1) === bgImageArray.length) { setTimeout(function() { backgroundSequence() }, bgImageCrossFadeMSecs)} else { k++; }
		  },
		  bgImageCrossFadeMSecs * i
	        );
	      }
	  }
	  
	  function displayBackgroundImage(pos) {
	      $(document.body).css('background', "url(" + bgImageBaseUrl + bgImageArray[pos] + ") no-repeat center center fixed");
	      $(document.body).css('background-size', "cover");
	  }
	  
	  function backgroundSequence(pos) {
	      displayBackgroundImage(pos);
	      window.setTimeout(function() {
		  var nextPos = (pos + 1 ) % bgImageArray.length;
		  backgroundSequence(nextPos);
	      }, 
		bgImageCrossFadeMSecs
	      );		 
	  }
	  
	  $(document).ready(function() {
	      backgroundSequence(0);
	  });
*/	  
        </script>
    </head>
    <body id="xfade" style="background-color: white;">
      <!-- figure elements used for x 4 background image cross-fades (xfade) -->
      <figure></figure>
      <figure></figure>
      <figure></figure>
      <figure></figure>

      <div class="center" style="width: 50%; z-index: 1;">
            <h1 id="heading" class="shake-constant shake-chunk">Scan me to select an interactive app!</h1>
            <div id="frame" class="frame">
	      <div id="barcode" class="center" style="align-content: center; height: 250px">
	      </div>
            </div>                        
            <h2 id="website">Or visit on your phone:</h2>
        </div>
        <footer>
          <script src="receiver.js"></script>	    
        </footer>
    </body>
</html>
