<!DOCTYPE html>
<html lang="en">
    <head>
        <title>App Launcher | Hey You Interactive Display</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link rel="stylesheet" type="text/css" href="https://csshake.surge.sh/csshake.min.css" />

	<!--
        <link rel="icon" href="https://www.waikato.ac.nz/favicon-32x32.png?v=QE50XMk2oY" sizes="any">
        <link rel="icon" href="https://www.waikato.ac.nz/favicon-32x32.png?v=QE50XMk2oY" type="image/svg+xml">
        <link rel="apple-touch-icon" href="https://www.waikato.ac.nz/favicon-32x32.png?v=QE50XMk2oY"> < ! - - 180Ã—180 - - > apparently!
	  -->
	  
	<link rel="icon" href="logo/heyyou-fav.ico" sizes="any" />
	
        <!--<link rel="manifest" href="/manifest.webmanifest">-->

        <!-- Cast Debug Logger -->
        <!--<script src="//www.gstatic.com/cast/sdk/libs/devtools/debug_layer/caf_receiver_logger.js"></script>-->

        <link rel="stylesheet" href="index.css">
	
        <script src="socketCreation.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>

        <script>
          // Custom socketLoaded() for top-level activity launcher
          function socketLoaded(anyListener) {

	      var display_host = self.location.host;
              console.log("Display hostname: " + display_host);
              console.log("Room ID: " + getCookie('roomID'));


	      socket.on('setNewCookie', (cName, cContent, cDurationMins) => {
		  if (cName == "roomName") {
		      $('#website').text("Or visit on your phone: " + display_host + '/join/' + cContent);
		  }
	      });

	      var full_room_id = display_host + '/join/' + getCookie('roomID')
	      
              var url = 'https://api.qrserver.com/v1/create-qr-code/?data=' + full_room_id + '&size=250x250';
	      var $img = $('<img>').attr('src',url);
              $('#barcode').html($img);
	      
              console.log("QR code URL: " + url);

	      if (getCookie('roomName') != "") {
		  $('#website').text("Or visit on your phone: " + display_host + '/join/' + getCookie('roomName'));
	      }
	      
          }
	  	  
	  setupConnection("display");	  
        </script>

    </head>
    <body id="xfade" style="background-color: white;">
      <!-- figure elements used for x 4 background image cross-fades (xfade) -->
      <figure></figure>
      <figure></figure>
      <figure></figure>
      <figure></figure>

      <div class="center" style="width: 50%; z-index: 1;">
            <h1 id="heading" class="shake-constant shake-chunk">Scan me to select an interactive app!</h1>
            <div id="frame" class="frame">
	      <div id="barcode" class="center" style="align-content: center; height: 250px">
	      </div>
            </div>                        
            <h2 id="website">Or visit on your phone:</h2>
        </div>
        <footer>
          <script src="receiver.js"></script>	    
        </footer>
    </body>
</html>
